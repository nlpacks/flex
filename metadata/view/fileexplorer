{
    "type": "Ext.container.Viewport",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "fileexplorer",
        "designer|initialView": true,
        "layout": "border"
    },
    "designerId": "2f9a5507-29ba-42d8-bc58-5172bcead7ab",
    "cn": [
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|floatable": false,
                "layout|region": "center",
                "container|align": "stretch",
                "autoRender": true,
                "id": "actionpanel",
                "loader": null,
                "designer|createAlias": null,
                "autoScroll": true,
                "layout": "vbox",
                "collapseFirst": false,
                "collapsed": false,
                "title": "My Panel",
                "titleCollapse": true
            },
            "designerId": "cc09fe09-c277-4039-a1fa-065787b80d61"
        },
        {
            "type": "Ext.tree.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|collapseMode": "header",
                "layout|region": "west",
                "layout|split": true,
                "id": "filetreepanel",
                "width": 338,
                "title": "My Tree Panel",
                "rowLines": true,
                "store": "FileTreeStore",
                "folderSort": true
            },
            "designerId": "17f6b295-6ecf-4562-9016-25afb99ecc12",
            "cn": [
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onFiletreepanelItemClick",
                        "implHandler": [
                            "",
                            "var path;",
                            "",
                            "if (record.isRoot())",
                            "path = '/home/roger/documents/flex/flex';",
                            "else",
                            "path = record.get('path');  ",
                            "",
                            "",
                            "if (record.get('leaf') === false)",
                            "{",
                            "    record.expand();",
                            "    return;",
                            "}",
                            "",
                            "",
                            "if (record.getDepth() ==3 &&  record.get('text')=='customconfig')",
                            "{",
                            "    Ext.Ajax.request({",
                            "        url: 'sqlite.php',",
                            "        method: 'POST',",
                            "        params: { 'path': path },",
                            "        success: function(response,options) {",
                            "",
                            "            var actionpanel=Ext.getCmp('actionpanel');",
                            "            actionpanel.removeAll();",
                            "",
                            "            var rtext=Ext.JSON.decode(response.responseText); ",
                            "            // rtext is an array set, and it's element is JSON object instance",
                            "",
                            "",
                            "            for (var arraykey in rtext)",
                            "            {   ",
                            "                var jdata=rtext[arraykey] ; ",
                            "",
                            "                var p = Ext.create('Ext.grid.Panel', {",
                            "                    title: jdata,",
                            "                    animCollapse: false,",
                            "                    collapsible: true,",
                            "                    titleCollapse: true,",
                            "                    collapsed: true,                   ",
                            "                    columns: [  ]",
                            "                });                    ",
                            "",
                            "",
                            "                p.on('expand',function(panel) {              ",
                            "",
                            "                    Ext.Ajax.request({",
                            "                        url: 'sqlitedata.php',",
                            "                        method: 'POST',",
                            "                        params: { 'path': path,'table': panel.title },",
                            "                        callback: function(options,success,response) {",
                            "                            var strT=response.responseText;",
                            "                            var json=Ext.JSON.decode(strT.replace(/\\\"\\{/g,\"{\").replace(/\\}\\\"/g,\"}\")); ",
                            "",
                            "                            var store=Ext.create('Ext.data.Store',{",
                            "                                fields : json.fields,",
                            "                                data: json.data",
                            "                            });",
                            "                            panel.reconfigure(store,json.columns);",
                            "                            //  panel.render();",
                            "                        }",
                            "                    });",
                            "                    panel.expand();",
                            "                });",
                            "                actionpanel.add(p);",
                            "            }",
                            "",
                            "        },",
                            "        failure: function(response,options){Ext.Msg.alert('ajax','failure');}",
                            "    });",
                            "",
                            "}"
                        ],
                        "name": "itemclick",
                        "scope": "me"
                    },
                    "designerId": "d8e73cff-10c9-4e22-8c12-4ce4e74ce26e"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onFiletreepanelItemExpand",
                        "implHandler": [
                            "var actionpanel=Ext.getCmp('actionpanel');",
                            "actionpanel.removeAll();",
                            "",
                            "if (nodeinterface.isRoot())",
                            "path = '/home/roger/documents/flex/flex';",
                            "else",
                            "path = nodeinterface.get('path');  ",
                            "",
                            "",
                            "//Ext.MessageBox.alert('item click', 'item click');",
                            "if (nodeinterface.get('leaf') === true)",
                            "return;",
                            "",
                            "",
                            "",
                            "",
                            "Ext.Ajax.request({",
                            "    url: 'filenodes.php',",
                            "    method: 'POST',",
                            "    params: { 'path': path },",
                            "    success: function(response,options) {",
                            "",
                            "        var rtext=Ext.JSON.decode(response.responseText); ",
                            "        // rtext is an array set, and it's element is JSON object instance",
                            "",
                            "        if (Ext.isEmpty(rtext)===true)",
                            "        {",
                            "            nodeinterface.loaded=true;            ",
                            "        }",
                            "        else",
                            "        {",
                            "            nodeinterface.removeAll();",
                            "            nodeinterface.appendChild(rtext);            ",
                            "            //record.getOwnerTree().getStore().sync();    ",
                            "            nodeinterface.expand();",
                            "",
                            "            // init the file grid data            ",
                            "",
                            "            Ext.Ajax.request({",
                            "                url: 'fileinfo.php',",
                            "                method: 'POST',",
                            "                params: { 'path': path },",
                            "                success: function(response,options) {",
                            "",
                            "                    var infotext=Ext.JSON.decode(response.responseText); ",
                            "                    var showfiles=new Ext.create('MyApp.view.FileGridPanel');            ",
                            "                    showfiles.getStore().removeAll();",
                            "                    if (Ext.isEmpty(infotext)===false)",
                            "                    {   ",
                            "                        showfiles.getStore().loadData(infotext);",
                            "                        showfiles.getView().refresh();",
                            "                    }    ",
                            "                    actionpanel.add(showfiles);",
                            "                },",
                            "                failure: function(response,options){Ext.Msg.alert('ajax','failure');}",
                            "            });            ",
                            "        }        ",
                            "    },",
                            "    failure: function(response,options){Ext.Msg.alert('ajax','failure');}",
                            "});"
                        ],
                        "name": "itemexpand",
                        "scope": "me"
                    },
                    "designerId": "a280b095-2e1b-4a90-a213-a94e0a5049e5"
                }
            ]
        }
    ]
}